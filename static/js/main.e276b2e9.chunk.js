(this["webpackJsonpspotify-custom-radio"]=this["webpackJsonpspotify-custom-radio"]||[]).push([[0],{19:function(e,t,s){},21:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},32:function(e,t,s){},33:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},37:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(22),i=s.n(r),c=(s(29),s(2)),o=s(3);s(19);function l(){var e=sessionStorage.getItem("access_token_timestamp");Date.now()-e>33e5&&(window.sessionStorage.removeItem("authorized"),window.sessionStorage.removeItem("access_token"),window.sessionStorage.removeItem("access_token_timestamp"),alert("Your login token has expired. Please login again."),window.location.reload())}s(30);var u=s(0);var h=function(e){var t=e.setUserID,s=e.setUserPlaylists,n=Object(a.useState)(""),r=Object(c.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){l();var e={method:"GET",headers:{Authorization:"Bearer "+window.sessionStorage.getItem("access_token")}};fetch("https://api.spotify.com/v1/me",e).then((function(e){return e.json()})).then((function(e){o(e.display_name),t(e.id)})).catch((function(e){o("<error>"),console.log(e)}));var a=new URL("https://api.spotify.com/v1/me/playlists");a.searchParams.set("limit",50);for(var n=0,r={};a.searchParams.set("offset",n),fetch(a.href,e).then((function(e){return e.json()})).then((function(e){e.items.forEach((function(e){r[e.id]=e.name}))})).catch((function(e){console.log(e)})),!(Object.keys(r).length<50);)n+=50;return s(r),function(){o(""),t(""),s({})}}),[t,s]),Object(u.jsxs)("div",{className:"userinfo",children:[Object(u.jsxs)("div",{children:["Logged in as",Object(u.jsxs)("strong",{children:["\xa0",i,"\xa0"]})]}),Object(u.jsx)("div",{style:{cursor:"pointer"},onClick:function(){window.sessionStorage.removeItem("authorized"),window.sessionStorage.removeItem("access_token"),window.sessionStorage.removeItem("access_token_timestamp"),alert("You have been logged out successfully."),window.location.reload()},children:Object(u.jsx)("u",{children:"(Log Out)"})})]})};var d=s(12);s(21);var b=function(e){var t=e.isVisible,s=e.showSubsection;return t?Object(u.jsx)("div",{className:"main-button main-visible-button",children:s?"\u2014":"+"}):Object(u.jsx)("div",{className:"main-button"})};var m=function(e){var t=e.artistID,s=e.albumID,a=e.isSubsection,n=e.isDiscography,r=e.playlist,i=e.setPlaylist;return Object(u.jsx)("div",{className:"main-button main-visible-button main-delete-button",onClick:function(){var e=Object(d.a)({},r);!n&&a?(s?delete e[t].albums[s]:e[t].topTracks=!1,e[t].topTracks||0!==Object.keys(e[t].albums).length||delete e[t]):delete e[t],i(e)},children:"X"})};s(32);var p=function(e){var t=e.mainName,s=e.subName,n=e.artistName,r=e.artistID,i=e.albumID,o=e.imageUrl,l=e.isSearchResult,h=e.hasSubsection,p=e.subsection,j=e.playlist,f=e.setPlaylist,y=e.setQuery,v=e.setResultVisible,g=Object(a.useState)(!1),O=Object(c.a)(g,2),x=O[0],k=O[1];return Object(u.jsxs)("div",{className:"main-entry",children:[Object(u.jsxs)("div",{className:"main-entry-details",children:[Object(u.jsxs)("div",{className:"main-entry-details-left",onClick:l&&!h?function(){var e=Object(d.a)({},j);if(r in j)e[r].discography?alert("You already added this artist's discography"):e[r].albums[i]=t;else{var s={};s[i]=t,e[r]={name:n,imageUrl:o,discography:!1,topTracks:!1,albums:s}}f(e),v(!1),y("")}:function(){return k(!x)},children:[Object(u.jsx)(b,{isVisible:h,showSubsection:x}),Object(u.jsx)("img",{src:o,alt:"",style:{width:"90px",height:"90px",padding:"5px"}}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:t}),Object(u.jsx)("p",{children:s})]})]}),!l&&Object(u.jsx)(m,{artistID:r,playlist:j,setPlaylist:f})]}),x&&p]})};var j=function(e){var t=e.playlist,s=e.artistID,a=e.artistName,n=e.artistUrl,r=e.isDiscography,i=e.setPlaylist,c=e.setResultVisible,o=e.setQuery;return Object(u.jsx)("div",{className:"main-entry-subsection-item",onClick:function(){var e=Object(d.a)({},t);s in t?r?(e[s].discography=!0,e[s].topTracks=!1,e[s].albums=new Set([])):e[s].discography?alert("You already added this artist's discography"):e[s].topTracks=!0:e[s]={name:a,imageUrl:n,discography:r,topTracks:!r,albums:{}},i(e),c(!1),o("")},children:r?"Add Discography":"Add Top 10 Tracks"})};var f=function(e){var t=e.artistID,s=e.albumID,a=e.title,n=e.isDiscography,r=e.playlist,i=e.setPlaylist;return Object(u.jsxs)("div",{className:"main-entry-subsection-item",children:[a,Object(u.jsx)(m,{artistID:t,albumID:s,isSubsection:!0,isDiscography:n,playlist:r,setPlaylist:i})]})};s(33);var y=function(e){var t=e.artistID,s=e.artistName,a=e.artistUrl,n=e.isSearchResult,r=e.playlist,i=e.setPlaylist,c=e.setQuery,o=e.setResultVisible,l=[];return n?l=[!0,!1].map((function(e){return Object(u.jsx)(j,{playlist:r,artistID:t,artistName:s,artistUrl:a,isDiscography:e,setPlaylist:i,setResultVisible:o,setQuery:c},"search subsection"+t+e)})):r[t].discography?l.push(Object(u.jsx)(f,{artistID:t,title:"Discography",isDiscography:!0,playlist:r,setPlaylist:i},"playlist subsection"+t+"discography")):(r[t].topTracks&&l.push(Object(u.jsx)(f,{artistID:t,title:"Top Tracks",isDiscography:!1,playlist:r,setPlaylist:i},"playlist subsection"+t+"toptracks")),Object.keys(r[t].albums).forEach((function(e){l.push(Object(u.jsx)(f,{artistID:t,albumID:e,title:"(album) ".concat(r[t].albums[e]),isDiscography:!1,playlist:r,setPlaylist:i},"playlist subsection"+t+e))}))),Object(u.jsx)("div",{className:"main-entry-subsection",children:l})};var v=function(e){var t=e.query,s=e.setQuery,n=e.playlist,r=e.setPlaylist,i=e.setResultVisible,o=Object(a.useState)([]),h=Object(c.a)(o,2),d=h[0],b=h[1],m=Object(a.useState)([]),j=Object(c.a)(m,2),f=j[0],v=j[1],g=Object(a.useState)(0),O=Object(c.a)(g,2),x=O[0],k=O[1],w=Object(a.useState)(0),S=Object(c.a)(w,2),P=S[0],I=S[1];Object(a.useEffect)((function(){l();var e={method:"GET",headers:{Authorization:"Bearer "+window.sessionStorage.getItem("access_token")}},s=new URL("https://api.spotify.com/v1/search");return s.searchParams.set("q",t),s.searchParams.set("market","from_token"),s.searchParams.set("type","artist,album"),fetch(s.href,e).then((function(e){return e.json()})).then((function(e){var t,s;b(null===e||void 0===e||null===(t=e.artists)||void 0===t?void 0:t.items),v(null===e||void 0===e||null===(s=e.albums)||void 0===s?void 0:s.items)})).catch((function(e){console.log(e)})),k(0),I(0),function(){b([]),v([])}}),[t]);var N=d?d.length:0,D=f?f.length:0,T=null===d||void 0===d?void 0:d.slice(x,x+5).map((function(e){var t,a,c,o;return Object(u.jsx)(p,{mainName:e.name,subName:e.genres.map((function(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")})).join(", "),artistID:e.id,imageUrl:null===(t=e.images)||void 0===t||null===(a=t.at(-1))||void 0===a?void 0:a.url,isSearchResult:!0,hasSubsection:!0,subsection:Object(u.jsx)(y,{artistID:e.id,artistName:e.name,artistUrl:null===(c=e.images)||void 0===c||null===(o=c.at(-1))||void 0===o?void 0:o.url,isSearchResult:!0,playlist:n,setPlaylist:r,setQuery:s,setResultVisible:i}),playlist:n,setPlaylist:r,setQuery:s},"search result"+e.id)})),_=null===f||void 0===f?void 0:f.slice(P,P+5).map((function(e){var t,a,c,o;return Object(u.jsx)(p,{artistName:null===(t=e.artists)||void 0===t?void 0:t.at(0).name,artistID:null===(a=e.artists)||void 0===a?void 0:a.at(0).id,albumID:e.id,mainName:e.name,subName:e.artists.map((function(e){return e.name})).join(", "),imageUrl:null===(c=e.images)||void 0===c||null===(o=c.at(0))||void 0===o?void 0:o.url,isSearchResult:!0,hasSubsection:!1,playlist:n,setPlaylist:r,setResultVisible:i,setQuery:s},"search result"+e.id)})),A=function(e){return e.preventDefault()};return Object(u.jsxs)("div",{className:"search-searchresult main-component",children:[Object(u.jsx)("p",{className:"main-title",children:"Artists"}),T&&x>0&&Object(u.jsx)("div",{className:"main-entry-details search-scroll-buttons",onClick:function(){return k(x-5)},onMouseDown:A,children:"Previous..."}),T,T&&x+5<N&&Object(u.jsx)("div",{className:"main-entry-details search-scroll-buttons",onClick:function(){return k(x+5)},onMouseDown:A,children:"Next..."}),Object(u.jsx)("p",{className:"main-title",children:"Albums"}),P>0&&Object(u.jsx)("div",{className:"main-entry-details search-scroll-buttons",onClick:function(){return I(P-5)},onMouseDown:A,children:"Previous..."}),_,_&&P+5<D&&Object(u.jsx)("div",{className:"main-entry-details search-scroll-buttons",onClick:function(){return I(P+5)},onMouseDown:A,children:"Next..."})]})};s(34);var g=function(e){var t=e.playlist,s=e.setPlaylist,n=function(e){var t=Object(a.useState)(e),s=Object(c.a)(t,2),n=s[0],r=s[1],i=Object(a.useRef)(null),o=function(e){i.current&&!i.current.contains(e.target)&&n&&r(!1)};return Object(a.useEffect)((function(){return document.addEventListener("click",o,!0),function(){document.removeEventListener("click",o,!0)}})),[i,n,r]}(!1),r=Object(c.a)(n,3),i=r[0],o=r[1],l=r[2],h=Object(a.useState)(""),d=Object(c.a)(h,2),b=d[0],m=d[1];return Object(a.useEffect)((function(){l(!!b)}),[b,l]),Object(u.jsx)("div",{ref:i,children:Object(u.jsxs)("div",{className:"search",children:[Object(u.jsx)("input",{className:"search-searchbar main-component",type:"text",placeholder:"Search...",value:b,onChange:function(e){return m(e.target.value)},onFocus:function(){return l(!0)}}),b&&o&&Object(u.jsx)(v,{query:b.trim(),setQuery:m,playlist:t,setPlaylist:s,setResultVisible:l})]})})};s(35);var O=function(e){var t,s=e.playlist,a=e.setPlaylist;return t=0===Object.keys(s).length?Object(u.jsx)("p",{style:{textAlign:"center",alignSelf:"center",color:"var(--text-color-dim)",fontStyle:"italic"},children:"This playlist seems a bit empty... Add some songs to it through the search bar above."}):Object.keys(s).map((function(e){var t=Object(u.jsx)(y,{artistID:e,playlist:s,setPlaylist:a}),n="";return s[e].discography?n="Discography":(s[e].topTracks&&(n+="Top Tracks, "),Object.values(s[e].albums).forEach((function(e){n=n+"(album) "+e+", "})),n=n.slice(0,-2)),Object(u.jsx)(p,{artistID:e,mainName:s[e].name,subName:n,imageUrl:s[e].imageUrl,hasSubsection:!0,subsection:t,playlist:s,setPlaylist:a},"playlist"+e)})),Object(u.jsxs)("div",{className:"main-component playlist",children:[Object(u.jsx)("p",{className:"main-title",children:"Current Playlist"}),t]})},x=s(16),k=s(5),w=s.n(k),S=s(11),P="8e9896a45be540c3b7260c13d4abe33d",I="https://tquang1708.github.io/spotify-custom-radio/#/",N="Your custom radio station, created from tquang1708.github.io/spotify-custom-radio/",D=!0,T=50,_=500;s(37);function A(e,t){return C.apply(this,arguments)}function C(){return(C=Object(S.a)(w.a.mark((function e(t,s){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(t.href,s).catch((function(e){console.log(e)}));case 3:if(!(a=e.sent).ok){e.next=8;break}return e.abrupt("break",15);case 8:if(429!==a.status){e.next=12;break}return e.delegateYield(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(a.headers.get("retry-after"),10),e.next=3,new Promise((function(e){return setTimeout(e,t)}));case 3:case"end":return e.stop()}}),e)}))(),"t0",10);case 10:e.next=13;break;case 12:403===a.status&&("","403 forbidden. Your login token has expired, probably. Please login again.\n\n","If this happened while you were adding tracks to the playlist, this might have been ","triggered because the playlist already has 10,000 items, which is Spotify's maximum ","permitted size for a playlist.",window.sessionStorage.removeItem("authorized"),window.sessionStorage.removeItem("access_token"),window.sessionStorage.removeItem("access_token_timestamp"),alert("403 forbidden. Your login token has expired, probably. Please login again.\n\nIf this happened while you were adding tracks to the playlist, this might have been triggered because the playlist already has 10,000 items, which is Spotify's maximum permitted size for a playlist."),window.location.reload());case 13:e.next=0;break;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return E.apply(this,arguments)}function E(){return(E=Object(S.a)(w.a.mark((function e(t,s){var a,n,r,i,c,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Set([]),(n=new URL("https://api.spotify.com/v1/albums/".concat(s,"/tracks"))).searchParams.set("market","from_token"),n.searchParams.set("limit","50"),r=0;case 5:return n.searchParams.set("offset",r),e.next=9,A(n,t);case 9:return i=e.sent,e.next=12,i.json().catch((function(e){return console.log(e)}));case 12:if(c=e.sent,(o=c.items).forEach((function(e){a.add(e.uri)})),!(o.length<50)){e.next=19;break}return e.abrupt("break",22);case 19:r+=50;case 20:e.next=5;break;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t;for(t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[s],e[s]=a}return e}var z=function(e){var t,s=e.userID,n=e.userPlaylists,r=e.playlist,i=e.playlistName,o=e.setTracksFetched,h=e.setTracksFetchFinished,d=e.setPlaylistName,b=e.setPlaylistLink,m=e.setAppInUsage,p=e.setPlaylistCreated,j=Object(a.useState)(!0),f=Object(c.a)(j,2),y=f[0],v=f[1],g=Object(a.useState)(""),O=Object(c.a)(g,2),k=O[0],P=O[1],I=Object(a.useState)(!0),C=Object(c.a)(I,2),E=C[0],z=C[1],F=Object(a.useState)("create private"),L=Object(c.a)(F,2),Y=L[0],M=L[1],Q=function(){var e=Object(S.a)(w.a.mark((function e(){var t,a,c,u,j,f,v,g,O,P,I,C,z,F,L,Y,M,Q,V;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(),0!==Object.keys(r).length){e.next=5;break}alert("Your playlist is currently empty. Nothing to be done for now."),e.next=67;break;case 5:if(!(Object.keys(r).length>T&&D)){e.next=14;break}t="",t+="There are more than ".concat(T," items in your playlist. "),t+="Please remove some items to free up the app.\n\n",t+="Note that you can turn off rate limiting on your local build by ",t+="turning off the respective option in options.js",alert(t),e.next=67;break;case 14:return a=window.sessionStorage.getItem("access_token"),c={method:"GET",headers:{Authorization:"Bearer "+a}},u=new Set([]),j=new Set([]),e.next=20,Promise.all(Object.keys(r).map(function(){var e=Object(S.a)(w.a.mark((function e(t){var s,a,n,i,o,l,h;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r[t].discography){e.next=27;break}(s=new URL("https://api.spotify.com/v1/artists/".concat(t,"/albums"))).searchParams.set("market","from_token"),s.searchParams.set("include_groups","album,single"),s.searchParams.set("limit","50"),a=0;case 6:return s.searchParams.set("offset",a),e.next=10,A(s,c);case 10:return n=e.sent,e.next=13,n.json().catch((function(e){return console.log(e)}));case 13:if(i=e.sent,o=i.items,o.map((function(e){return e.id})).forEach((function(e){return j.add(e)})),!(o.length<50)){e.next=21;break}return e.abrupt("break",24);case 21:a+=50;case 22:e.next=6;break;case 24:e.next=39;break;case 27:if(Object.keys(r[t].albums).forEach((function(e){return j.add(e)})),!r[t].topTracks){e.next=38;break}return(l=new URL("https://api.spotify.com/v1/artists/".concat(t,"/top-tracks"))).searchParams.set("market","from_token"),e.next=33,A(l,c);case 33:return h=e.sent,e.next=36,h.json().catch((function(e){return console.log(e)}));case 36:e.sent.tracks.forEach((function(e){u.add(e.uri)}));case 38:case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:if(!(D&&j.size>_)){e.next=29;break}f="",f+="There are more than ".concat(_," albums/eps/singles in your playlist. "),f+="Please remove some items to free up the app.\n\n",f+="Note that you can turn off rate limiting on your local build by ",f+="turning off the respective option in options.js",alert(f),e.next=66;break;case 29:return m(!1),e.next=32,Promise.all(Array.from(j).map(function(){var e=Object(S.a)(w.a.mark((function e(t){var s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(c,t);case 2:s=e.sent,u=new Set([].concat(Object(x.a)(u),Object(x.a)(s)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 32:if(o(u.size),h(!0),v="",!y){e.next=51;break}return d(g=i||"Custom Radio Station"),O={name:g,public:!E,description:N},P={method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify(O)},I=new URL("https://api.spotify.com/v1/users/".concat(s,"/playlists")),e.next=43,A(I,P);case 43:return C=e.sent,e.next=46,C.json().catch((function(e){return console.log(e)}));case 46:z=e.sent,v=z.id,b(z.external_urls.spotify),e.next=62;break;case 51:return v=k||Object.keys(n)[0],F={method:"GET",headers:{Authorization:"Bearer "+a}},L=new URL("https://api.spotify.com/v1/playlists/".concat(v)),e.next=56,A(L,F);case 56:return Y=e.sent,e.next=59,Y.json().catch((function(e){return console.log(e)}));case 59:M=e.sent,d(M.name),b(M.external_urls.spotify);case 62:return Q=R(Array.from(u)),V=new URL("https://api.spotify.com/v1/playlists/".concat(v,"/tracks")),e.next=66,Promise.all(Object(x.a)(Array(Math.ceil(Q.length/100)).keys()).map(function(){var e=Object(S.a)(w.a.mark((function e(t){var s,n,r,i,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=100*t,n=Q.slice(s,s+100),r={uris:n},i={method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=6,A(V,i);case 6:return c=e.sent,e.next=9,c.json().catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 66:p(!0);case 67:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(y)t=Object(u.jsx)("input",{type:"text",value:i,placeholder:"Playlist Name...",onChange:function(e){return d(e.target.value)},style:{height:"25px"}});else{var V=Object.keys(n).map((function(e){return Object(u.jsx)("option",{value:e,children:n[e]},"append"+e)}));t=Object(u.jsx)("select",{value:k,onChange:function(e){d(n[e.target.value]),P(e.target.value)},children:V})}return Object(u.jsxs)("div",{className:"submit",children:[Object(u.jsxs)("div",{className:"submit-options",children:[Object(u.jsxs)("select",{value:Y,onChange:function(e){"append"===e.target.value?0===Object.keys(n).length?alert("You have no playlist to append to yet."):(M(e.target.value),v(!1)):(M(e.target.value),v(!0),d(""),e.target.value.includes("private")?z(!0):z(!1))},children:[Object(u.jsx)("option",{value:"create private",children:"Create a new Private Playlist"}),Object(u.jsx)("option",{value:"create public",children:"Create a new Public Playlist"}),Object(u.jsx)("option",{value:"append",children:"Append to an existing Playlist"})]}),t]}),Object(u.jsx)("div",{className:"submit-button main-component",onClick:Q,children:"Submit"})]})};var F=function(e){var t,s=e.footerText;if(e.selfAdvertising){t=Object(u.jsxs)("div",{children:["Created by Quang Tran, October 2021. Utilizing the Spotify API in developement mode, so only email addresses added through the dashboard can actually use the app. Forward all your bug reports and/or suggestions to ",Object(u.jsx)("a",{href:"https://github.com/tquang1708/spotify-custom-radio/issues",children:"here."})]})}else t=Object(u.jsx)("div",{children:s});return Object(u.jsx)("div",{style:{color:"var(--text-color-dim)",position:"fixed",zIndex:"-1",bottom:"5px",right:"5px",fontSize:"0.7em",textAlign:"right"},children:t})},L=s(9);var Y=function(e){var t,s=e.tracksFetched,n=e.tracksFetchFinished,r=e.playlistCreated,i=e.playlistName,o=e.playlistLink,l=e.setAppInUsage,h=e.setPlaylistCreated,d=Object(a.useState)("."),b=Object(c.a)(d,2),m=b[0],p=b[1];return Object(a.useEffect)((function(){var e=setInterval((function(){5===m.length?p("."):p(m+".")}),350);return function(){clearInterval(e)}}),[m]),r?Object(u.jsxs)("div",{className:"center-element",children:[Object(u.jsxs)("p",{className:"center-text",children:["Playlist ",Object(u.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",children:i})," Finished!",Object(u.jsx)(L.b,{to:"/",onClick:function(){l(!0),h(!1),window.location.reload()},children:"\xa0Start Again?"})]}),Object(u.jsx)(F,{selfAdvertising:!0})]}):("or during times when the site is busy due to rate limiting on ","Spotify's API.",t=n?Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{style:{color:"var(--highlight-color)"},children:s})," Tracks Found. Adding",m]}):Object(u.jsxs)("div",{children:["Fetching Tracks",m]}),Object(u.jsxs)("div",{className:"center-element",children:[Object(u.jsxs)("p",{className:"center-text",children:["Constructing ",Object(u.jsx)("span",{style:{color:"var(--highlight-color)"},children:"Playlist"}),Object(u.jsx)("br",{}),t]}),Object(u.jsx)(F,{footerText:"It might take a while to build the playlist for larger playlists or during times when the site is busy due to rate limiting on Spotify's API."})]}))};s(46);var M=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(""),i=Object(c.a)(r,2),o=i[0],l=i[1],d=Object(a.useState)({}),b=Object(c.a)(d,2),m=b[0],p=b[1],j=Object(a.useState)(0),f=Object(c.a)(j,2),y=f[0],v=f[1],x=Object(a.useState)(!1),k=Object(c.a)(x,2),w=k[0],S=k[1],P=Object(a.useState)(""),I=Object(c.a)(P,2),N=I[0],D=I[1],T=Object(a.useState)(""),_=Object(c.a)(T,2),A=_[0],C=_[1],U=Object(a.useState)(!0),E=Object(c.a)(U,2),R=E[0],L=E[1],M=Object(a.useState)(!1),Q=Object(c.a)(M,2),V=Q[0],B=Q[1];if(Object(a.useEffect)((function(){setTimeout((function(){window.sessionStorage.removeItem("authorized"),window.sessionStorage.removeItem("access_token"),window.sessionStorage.removeItem("access_token_timestamp"),alert("Your login token has expired. Please login again."),window.location.reload()}),33e5)}),[]),R){return"Note that the Discography option only includes all Albums, ","Singles and EPs and do not include Compilations or Apperances ","on other artists' albums.",Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(h,{setUserID:l,setUserPlaylists:p}),Object(u.jsx)(g,{playlist:s,setPlaylist:n}),Object(u.jsx)(O,{playlist:s,setPlaylist:n}),Object(u.jsx)(z,{userID:o,userPlaylists:m,playlist:s,playlistName:N,setTracksFetched:v,setTracksFetchFinished:S,setPlaylistName:D,setPlaylistLink:C,setAppInUsage:L,setPlaylistCreated:B}),Object(u.jsx)(F,{footerText:"Note that the Discography option only includes all Albums, Singles and EPs and do not include Compilations or Apperances on other artists' albums."})]})}return Object(u.jsx)(Y,{tracksFetched:y,tracksFetchFinished:w,playlistName:N,playlistLink:A,playlistCreated:V,setAppInUsage:L,setPlaylistCreated:B})};var Q=function(){var e=function(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}(16),t=new URL("https://accounts.spotify.com/authorize");return t.searchParams.set("client_id",P),t.searchParams.set("redirect_uri",I),t.searchParams.set("response_type","token"),t.searchParams.set("state",e),t.searchParams.set("scope","playlist-modify-private playlist-modify-public user-read-private"),sessionStorage.setItem("spt_auth_state",e),Object(u.jsxs)("div",{className:"center-element",children:[Object(u.jsxs)("div",{className:"center-text",children:[Object(u.jsx)("a",{href:t.href,children:"Login to Spotify"}),"\xa0to begin"]}),Object(u.jsx)(F,{selfAdvertising:!0})]})};var V=function(e){var t=e.setHasError,s=e.setAuthorized,n=new URLSearchParams(window.location.hash.substring(2)),r=sessionStorage.getItem("spt_auth_state"),i=n.get("access_token"),c=n.get("error"),l=n.get("state"),h=i&&r===l;return Object(a.useEffect)((function(){h?(sessionStorage.setItem("authorized","true"),sessionStorage.setItem("access_token",i),sessionStorage.setItem("access_token_timestamp",Date.now()),sessionStorage.removeItem("spt_auth_state"),s(!0)):(console.log(c),t(!0))})),h?Object(u.jsx)(o.a,{to:"/"}):Object(u.jsx)(o.a,{to:"/error/"})};var B=function(){return Object(u.jsxs)("div",{className:"center-element center-text",children:["An error occurred. Please try to ",Object(u.jsx)(L.b,{to:"/",children:"login again."})]})};var q=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(!1),i=Object(c.a)(r,2),l=i[0],h=i[1],d=sessionStorage.getItem("authorized");return Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{exact:!0,path:"/",children:l||"true"===d?Object(u.jsx)(M,{}):Object(u.jsx)(Q,{})}),Object(u.jsx)(o.b,{path:"/error/",children:s?Object(u.jsx)(B,{}):Object(u.jsx)(o.a,{to:"/"})}),Object(u.jsx)(o.b,{path:"/:access_token(access_token=.*)/",children:Object(u.jsx)(V,{setAuthorized:h,setHasError:n})})]})},G=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,48)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(L.a,{children:Object(u.jsx)(q,{})})}),document.getElementById("root")),G()}},[[47,1,2]]]);
//# sourceMappingURL=main.e276b2e9.chunk.js.map